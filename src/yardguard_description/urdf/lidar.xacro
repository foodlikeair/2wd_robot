<?xml version="1.0" ?>
<robot xmlns:xacro="www.ros.org">

  <!-- Lidar Link Definition -->
  <link name="base_scan">
      <visual>
          <geometry>
              <!-- Example dimensions for a common Lidar -->
              <cylinder radius="0.05" length="0.04"/>
          </geometry>
          <!-- Position the visual relative to the link's origin -->
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <!-- <material name="black"/> -->
      </visual>
      <collision>
          <geometry>
              <cylinder radius="0.05" length="0.04"/>
          </geometry>
          <origin xyz="0 0 0" rpy="0 0 0"/>
      </collision>
      <!-- Define inertial properties (simplified example) -->
      <inertial>
          <mass value="0.1"/>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
      </inertial>
  </link>

  <!-- Lidar Joint Definition -->
  <joint name="lidar_joint" type="fixed">
      <parent link="base_link"/>
      <child link="base_scan"/>
      <!-- Position the lidar on top of the parent link (adjust xyz values as needed) -->
      <origin xyz="0.08 0 0.1" rpy="0 0 0"/>
  </joint>

  <gazebo reference="base_scan">
      <sensor name="lidar" type="gpu_lidar">
          <always_on>true</always_on>
          <visualize>true</visualize>
          <update_rate>10</update_rate>
          <topic>scan</topic>
          <gz_frame_id>base_scan</gz_frame_id>
          <lidar>
              <scan>
                  <horizontal>
                      <samples>360</samples>
                      <resolution>1</resolution>
                      <min_angle>-3.14</min_angle>
                      <max_angle>3.14</max_angle>
                  </horizontal>
                  <!-- This does not work correctly -->
                  <!-- <vertical>
                      <samples>360</samples>
                      <resolution>1</resolution>
                      <min_angle>3.14</min_angle>
                      <max_angle>3.14</max_angle>
                  </vertical> -->
              </scan>
              <range>
                  <min>0.1</min>
                  <max>10.0</max>
                  <resolution>0.01</resolution>
              </range>
          </lidar>
      </sensor>
  </gazebo>

</robot>